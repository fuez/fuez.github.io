<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>linux - Andy's Blog</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Andy Zhang"><meta name=description content="What is Soft Link And Hard Link In Linux?  A symbolic or soft link is an actual link to the original file, whereas a hard link is a mirror copy of the original file. If you delete the original file, the soft link has no value, because it points to a non-existent file. But in the case of hard link, it is entirely opposite. Even if you delete the original file, the hard link will still has the data of the original file."><meta name=keywords content="linux,SRE,software"><meta name=generator content="Hugo 0.60.1 with theme even"><link rel=canonical href=http://localhost:1313/post/tips/linux/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="linux"><meta property="og:description" content="What is Soft Link And Hard Link In Linux?  A symbolic or soft link is an actual link to the original file, whereas a hard link is a mirror copy of the original file. If you delete the original file, the soft link has no value, because it points to a non-existent file. But in the case of hard link, it is entirely opposite. Even if you delete the original file, the hard link will still has the data of the original file."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/post/tips/linux/"><meta property="article:published_time" content="2017-06-13T11:48:45+08:00"><meta property="article:modified_time" content="2019-12-13T19:20:17+08:00"><meta itemprop=name content="linux"><meta itemprop=description content="What is Soft Link And Hard Link In Linux?  A symbolic or soft link is an actual link to the original file, whereas a hard link is a mirror copy of the original file. If you delete the original file, the soft link has no value, because it points to a non-existent file. But in the case of hard link, it is entirely opposite. Even if you delete the original file, the hard link will still has the data of the original file."><meta itemprop=datePublished content="2017-06-13T11:48:45+08:00"><meta itemprop=dateModified content="2019-12-13T19:20:17+08:00"><meta itemprop=wordCount content="3247"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="linux"><meta name=twitter:description content="What is Soft Link And Hard Link In Linux?  A symbolic or soft link is an actual link to the original file, whereas a hard link is a mirror copy of the original file. If you delete the original file, the soft link has no value, because it points to a non-existent file. But in the case of hard link, it is entirely opposite. Even if you delete the original file, the hard link will still has the data of the original file."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Andy's Blog</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/about/><li class=mobile-menu-item>About</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Andy's Blog</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>linux</h1><div class=post-meta><span class=post-time>2017-06-13</span><div class=post-category><a href=/categories/tip/>tip</a></div><span class=more-meta>3247 words</span>
<span class=more-meta>16 mins read</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#what-is-soft-link-and-hard-link-in-linuxhttpswwwostechnixcomexplainingsoftlinkandhardlinkinlinuxwithexamples>What is Soft Link And Hard Link In Linux?</a></li><li><a href=#you-can-define-hostaliases-to-create-a-userspecific-hosts-file-to-complement-etchosts>You can define HOSTALIASES to create a user-specific hosts file to complement /etc/hosts</a></li><li><a href=#one-good-example-to-show-journal-log-for-certian-service-journalctl-b-u-kubeletservice-since-1-hour-ago>One good example to show journal log for certian service: journalctl -b -u kubelet.service --since "1 hour ago"</a></li><li><a href=#you-can-telnet-remote-port-from-specified-source-address-by-nc-like-this-nc-s-172172439-zv-172172438-8081>You can telnet remote port from specified source address by nc like this nc -s 172.17.24.39 -zv 172.17.24.38 8081</a></li><li><a href=#command-to-probe-network-connectivity-quality-sudo-mtr-n-300-rwb-targethost>Command to probe network connectivity quality: sudo mtr -n 300 -rwb <targethost></a></li><li><a href=#split-by-tab-by-awk-helm-list--awk-f-t--print-7>Split by tab by awk: helm list | awk -F '\t' '{ print $7}'</a></li><li><a href=#use-127001-instead-of-localhost-when-benchmarking-with-ab-for-local-service>Use 127.0.0.1 instead of localhost when benchmarking with ab for local service</a></li><li><a href=#simple-bash-to-run-repeatly-for-i-in-110-do-echo-hello-done-or-for-i-in-seq-1-10-do-echo-hello-i-done>Simple bash to run repeatly: for i in {1..10}; do echo "hello"; done or for i in seq 1 10; do echo "hello $i"; done</a></li><li><a href=#how-to-keep-original-query-in-curl>How to keep original query in curl?</a></li><li><a href=#curl-example--curl-lo-minikube-httpsstoragegoogleapiscomminikubereleasesv130minikubedarwinamd64>curl example: curl -Lo minikube https://storage.googleapis.com/minikube/releases/v1.3.0/minikube-darwin-amd64</a></li><li><a href=#use-color-option-with-grep-like-this-sysctl-a--grep-e-color-machdepcpufeaturesvmx>Use --color option with grep like this: sysctl -a | grep -E --color 'machdep.cpu.features|VMX'</a></li><li><a href=#tools-for-trouble-shooting-linux-io-performance>Tools for trouble shooting linux io performance</a></li><li><a href=#tricks-to-append-to-bashhistory-for-each-executed-command>Tricks to append to ~/.bash_history for each executed command:</a></li><li><a href=#how-to-search-some-types-of-files-by-the-silver-searcherhttpsgithubcomggreerthesilversearcherissues128>How to search some types of files by the silver searcher</a></li><li><a href=#how-to-grow-an-ext234-file-system-with-resize2fshttpsaccessredhatcomarticles1196353>How to Grow an ext2/3/4 File System with resize2fs</a></li><li><a href=#understand-filemax-filenrhttpsaccessredhatcomdocumentationenusredhatenterpriselinux5htmltuningandoptimizingredhatenterpriselinuxfororacle9iand10gdatabaseschaporacle9iand10gtuningguidesettingfilehandles>Understand file-max /file-nr</a></li><li><a href=#linux-performance-commandshttpsgeekflarecomlinuxperformancecommands>Linux performance commands</a></li><li><a href=#perf-originally-performance-counter-for-linux-is-a-performance-analyzing-tool-in-linux>perf originally Performance Counter for Linux is a performance analyzing tool in Linux.</a></li><li><a href=#for-curl-it-is-possible-to-specify-a-selfsigned-ca-to-allow-https-connection-like-this--curl-cacert-rootcacrt-httpslocalhost3000>For curl, it is possible to specify a self-signed ca to allow https connection like this: curl --cacert root-ca.crt https://localhost:3000</a></li><li><a href=#use-lsblk-to-show-disk-and-partition-layout-for-local-host>Use lsblk to show disk and partition layout for local host</a></li><li><a href=#understand-noatime-flag-used-for-mount-option>Understand noatime flag used for mount option</a></li><li><a href=#use-sed-command-to-show-uncomment-options-sed-n-p-osdsyml>Use sed command to show un-comment options: sed -n /^[^#]/p osds.yml</a></li><li><a href=#how-to-specify-odd-crontab-sequence>How to specify odd crontab sequence?</a></li><li><a href=#how-to-use-dd-command-to-write-data-to-some-folder-for-testing>How to use dd command to write data to some folder for testing?</a></li><li><a href=#how-to-test-against-udp-port>How to test against udp port?</a></li><li><a href=#how-to-troubleshooting-weird-error-such-as-tmux-newsession-returns-cant-create-socket>How to troubleshooting weird error such as: Tmux new-session returns: “can't create socket”?</a></li><li><a href=#how-to-use-sed-to-print-out-something-not-match>How to use sed to print out something not match?</a></li><li><a href=#how-to-limit-bandwidth-on-linux>How to limit bandwidth on linux?</a></li><li><a href=#check-block-device-by-command-lsblk-on-linux>Check block device by command: lsblk on linux</a></li><li><a href=#how-to-check-whether-some-linux-module-is-installed>How to check whether some linux module is installed?</a></li><li><a href=#what-does-phony-means-in-makefilehttpswwwgnuorgsoftwaremakemanualhtmlnodephonytargetshtml>What does .PHONY means in Makefile</a></li><li><a href=#how-to-get-some-statistic-data-about-curl>How to get some statistic data about curl?</a></li><li><a href=#use-declare-to-show-defined-functions-exported-varibles-and-define-new-one>Use declare to show defined functions, exported varibles and define new one</a></li><li><a href=#how-to-rename-recorded-files-on-macbook>How to rename recorded files on macbook?</a></li><li><a href=#how-to-allow-certain-user-to-call-sudo-without-tty>How to allow certain user to call sudo without tty?</a></li><li><a href=#socket-statistics-tool-ss-improved-version-of-netstat-an-example-usage-ss-antl-to-show-listening--tcp-port>socket statistics tool ss, improved version of netstat, an example usage: ss -antl to show listening tcp port</a></li><li><a href=#how-to-display-the-date-and-time-using-linux-command-linehttpswwwlifewirecomdisplaydatetimeusinglinuxcommandline4032698>How To Display The Date And Time Using Linux Command Line</a></li><li><a href=#how-to-change-character-encoding-of-a-text-file-on-linuxhttpaskxmodulocomchangecharacterencodingtextfilelinuxhtml>How to change character encoding of a text file on Linux?</a></li><li><a href=#linux--unix-create-large-1gb-binary-image-file-with-dd-commandhttpwwwcybercitibizfaqhowtocreatelagefileswithddcommand>Linux / UNIX: Create Large 1GB Binary Image File With dd Command</a></li><li><a href=#how-to-fix-low-space-in-runhttpserverfaultcomquestions472683lowonspaceinrun>How to fix low space in /run?</a></li><li><a href=#do-changes-in-etcsecuritylimitsconf-require-a-reboot>Do changes in /etc/security/limits.conf require a reboot?</a></li><li><a href=#socat-linux--unix-tcp-port-forwarderhttpwwwcybercitibizfaqlinuxunixtcpportforwarding>socat: Linux / UNIX TCP Port Forwarder</a></li><li><a href=#how-to-create-password-hash>How to create password hash?</a></li><li><a href=#how-to-zero-an-existing-file>How to zero an existing file?</a></li><li><a href=#how-to-enable-permission-to-allow-other-to-list-a-directory>How to enable permission to allow other to list a directory?</a></li><li><a href=#how-to-add-a-user-to-a-group>How to add a user to a group?</a></li><li><a href=#how-to-turn-off-password-expirationhttpwwwcybercitibiztipssettingoffpasswordagingexpirationhtml>How to turn off password expiration?</a></li><li><a href=#how-to-grep-and-replace-certain-words>How to grep and replace certain words?</a></li><li><a href=#what-does--doubledash-mean-also-known-as-bare-double-dash>What does “” (double-dash) mean? (also known as “bare double dash”)?</a></li><li><a href=#how-do-i-find-the-direct-shared-object-dependencies-of-a-linux-elf-binaryhttpstackoverflowcomquestions6242761howdoifindthedirectsharedobjectdependenciesofalinuxelfbinary>How do I find the direct shared object dependencies of a Linux (ELF) binary?</a></li><li><a href=#how-to-fix-x11-connection-rejected-because-of-wrong-authentication-error-and-solutionhttpwwwcybercitibizfaqx11connectionrejectedbecauseofwrongauthentication>How to fix X11 Connection Rejected Because of Wrong Authentication Error and Solution</a></li><li><a href=#how-to-add-user-to-sudoers>How to add user to sudoers?</a></li><li><a href=#how-to-use-rsync-to-sync-files-to-remote-server>How to use rsync to sync files to remote server?</a></li><li><a href=#how-to-split-big-filehttpaskubuntucomquestions54579howtosplitlargerfilesintosmallerparts>How to split big file?</a></li><li><a href=#a-unix-utility-you-should-know-about-lsofhttpwwwcatonmatnetblogunixutilitieslsof>A Unix Utility You Should Know About: lsof</a></li><li><a href=#10-screen-command-examples-to-manage-linux-terminalshttpwwwtecmintcomscreencommandexamplestomanagelinuxterminals>10 Screen Command Examples to Manage Linux Terminals</a></li><li><a href=#how-to-add-a-new-cron-job-from-command-line>How to add a new cron job from command line?</a></li><li><a href=#some-of-linux-commands-support-pattern-batch-operatoins>Some of linux commands support pattern batch operatoins</a></li><li><a href=#how-to-check-linux-distribution-and-version>How to check linux distribution and version?</a></li><li><a href=#how-to-check-whether-some-process-exists-by-grep-and-exclude-grep-itself>How to check whether some process exists by grep and exclude grep itself?</a></li><li><a href=#how-to-find-zoombie-process-and-kill-them-by-awk>How to find zoombie process and kill them by awk?</a></li><li><a href=#how-to-delete-linux-mail>How to delete linux mail?</a></li><li><a href=#how-to-kill-zoombie-process>How to kill zoombie process?</a></li><li><a href=#how-to-diff-dictories>How to diff dictories?</a></li><li><a href=#how-to-use-find-with-exec-to-remove-some-type-of-files>How to use find with exec to remove some type of files?</a></li><li><a href=#how-to-upgrade-python>How to upgrade python?</a></li><li><a href=#simulate-initial-login-as-root>Simulate initial login as root</a></li><li><a href=#how-to-disable-root-ssh-login>How to disable root ssh login?</a></li><li><a href=#how-to-install-mongo-shell-on-ppc64-linux>How to install mongo shell on PPC64 linux?</a></li><li><a href=#how-to-add-a-cron-job-to-sync-code>How to add a cron job to sync code?</a></li><li><a href=#how-to-trouble-shooting-hang-in-linux>How to trouble shooting hang in linux?</a></li><li><a href=#how-to-trouble-shooting-ssh-issue>How to trouble shooting ssh issue?</a></li><li><a href=#how-to-check-linux-system-loginshutdownreset-event>How to check linux system login/shutdown/reset event?</a></li><li><a href=#how-to-grep-linux-process-or-grep-and-kill-them>How to grep linux process or grep and kill them?</a></li><li><a href=#how-to-check-linux-process>How to check linux process?</a></li><li><a href=#how-to-find-out-which-process-is-listening-upon-a-porthttpwwwcybercitibizfaqwhatprocesshasopenlinuxport>How to find out Which Process Is Listening Upon a Port</a></li><li><a href=#how-to-get-pid-for-a-service>How to get pid for a service?</a></li><li><a href=#how-to-consolidate-source-code-and-add-a-header-for-each-file>How to consolidate source code and add a header for each file?</a></li><li><a href=#fc-utility>fc utility</a></li><li><a href=#cat-vte>cat -vte</a></li><li><a href=#how-to-troube-shooting-http-connection-issue>How to troube shooting http connection issue?</a></li><li><a href=#how-to-remount-file-system-to-allow-write>How to re-mount file system to allow write?</a></li><li><a href=#how-to-add-a-system-service>How to add a system service?</a></li><li><a href=#how-to-generate-a-sequnence>How to generate a sequnence?</a></li><li><a href=#how-to-check-existing-group-and-user>How to check existing group and user?</a></li><li><a href=#how-to-query-detail-about-a-rpm-pacakge>How to query detail about a rpm pacakge?</a></li><li><a href=#how-to-get-file-stat-in-linux>How to get file stat in linux?</a></li><li><a href=#how-to-update-ubuntu-repo-list>How to update ubuntu repo list?</a></li><li><a href=#shell-control-flow-example>Shell control flow example</a><ul><li><a href=#tcpdump-basic-usage>tcpdump basic usage</a></li></ul></li><li><a href=#monitor-icmp-protocal--tcpdump-icmp>monitor icmp protocal: tcpdump icmp</a></li><li><a href=#monitor-packages-to-some-destination-port-tcpdump-n-dst-port-23>monitor packages to some destination port: tcpdump -n dst port 23</a></li><li><a href=#monitor-packages-going-out-to-other-host-tcpdump-n-dst-host-19216811-and-dst-port-23>monitor packages going out to other host: tcpdump -n "dst host 192.168.1.1 and dst port 23"</a></li><li><a href=#capture-packages-from-some-source-host-tcpdump-n-src-host-19216811>capture packages from some source host: tcpdump -n src host 192.168.1.1</a></li><li><a href=#capture-packate-from-some-interface-tcpdump-i-eth0-or-from-all-interface-tcpdump-i-any>capture packate from some interface: tcpdump -i eth0 or from all interface tcpdump -i any</a></li><li><a href=#capture-udp-package-from-all-interfaces-sudo-tcpdump-i-any-udp-port-11940-xvv>capture udp package from all interfaces: sudo tcpdump -i any udp port 11940 -Xvv</a><ul><li><a href=#tools>tools</a></li></ul></li><li><a href=#terminal-based-browers>Terminal based browers</a></li><li><a href=#references>References:</a></li><li><a href=#a-tcpdump-primer-with-exampleshttpsdanielmiesslercomstudytcpdump>A tcpdump Primer with Examples</a></li><li><a href=#linux-file-systems-ext2-vs-ext3-vs-ext4-vs-xfshttpshabbathsterblogspotjp201407linuxfilesystemsext2vsext3vsext4html>Linux File Systems: Ext2 vs Ext3 vs Ext4 vs Xfs</a></li><li><a href=#rsync-remote-sync-10-practical-examples-of-rsync-command-in-linuxhttpwwwtecmintcomrsynclocalremotefilesynchronizationcommands>Rsync (Remote Sync): 10 Practical Examples of Rsync Command in Linux</a></li><li><a href=#view-the-status-of-selinuxhttpswwwcentosorgdocs5html51deploymentguidesecselinuxstatusviewinghtml>view the status of SELinux</a></li><li><a href=#disable-selinuxhttpsaccessredhatcomdocumentationenusredhatenterpriselinux6htmlsecurityenhancedlinuxsectsecurityenhancedlinuxenablinganddisablingselinuxdisablingselinuxhtml>Disable SELinux</a></li></ul></nav></div></div><div class=post-content><h2 id=what-is-soft-link-and-hard-link-in-linuxhttpswwwostechnixcomexplainingsoftlinkandhardlinkinlinuxwithexamples><a href=https://www.ostechnix.com/explaining-soft-link-and-hard-link-in-linux-with-examples/>What is Soft Link And Hard Link In Linux?</a></h2><blockquote><p>A symbolic or soft link is an actual link to the original file, whereas a hard link is a mirror copy of the original file. If you delete the original file, the soft link has no value, because it points to a non-existent file. But in the case of hard link, it is entirely opposite. Even if you delete the original file, the hard link will still has the data of the original file. Because hard link acts as a mirror copy of the original file.</p><p>In a nutshell, a soft link</p><ul><li>can cross the file system,</li><li>allows you to link between directories,</li><li>has different inode number and file permissions than original file,</li><li>permissions will not be updated,</li><li>has only the path of the original file, not the contents.</li></ul></blockquote><blockquote><p>A hard Link</p><ul><li>can’t cross the file system boundaries (i.e. A hardlink can only work on the same filesystem),</li><li>can’t link directories,</li><li>has the same inode number and permissions of original file,</li><li>permissions will be updated if we change the permissions of source file,</li><li>has the actual contents of original file, so that you still can view the contents, even if the original file moved or removed.</li></ul></blockquote><h2 id=you-can-define-hostaliases-to-create-a-userspecific-hosts-file-to-complement-etchosts>You can define <code>HOSTALIASES</code> to create a user-specific hosts file to complement /etc/hosts</h2><pre><code>$ echo 'g www.google.com' &gt;&gt; ~/.hosts
$ export HOSTALIASES=~/.hosts
$ wget g -O /dev/null
</code></pre><p>NOTE: <code>HOSTALIASES</code> only works for applications using getaddrinfo(3) or gethostbyname(3)</p><h2 id=one-good-example-to-show-journal-log-for-certian-service-journalctl-b-u-kubeletservice-since-1-hour-ago>One good example to show journal log for certian service: <code>journalctl -b -u kubelet.service --since "1 hour ago"</code></h2><h2 id=you-can-telnet-remote-port-from-specified-source-address-by-nc-like-this-nc-s-172172439-zv-172172438-8081>You can telnet remote port from specified source address by <code>nc</code> like this <code>nc -s 172.17.24.39 -zv 172.17.24.38 8081</code></h2><h2 id=command-to-probe-network-connectivity-quality-sudo-mtr-n-300-rwb-targethost>Command to probe network connectivity quality: <code>sudo mtr -n 300 -rwb &lt;targetHost></code></h2><h2 id=split-by-tab-by-awk-helm-list--awk-f-t--print-7>Split by tab by <code>awk</code>: <code>helm list | awk -F '\t' '{ print $7}'</code></h2><h2 id=use-127001-instead-of-localhost-when-benchmarking-with-ab-for-local-service>Use <code>127.0.0.1</code> instead of <code>localhost</code> when benchmarking with <code>ab</code> for local service</h2><h2 id=simple-bash-to-run-repeatly-for-i-in-110-do-echo-hello-done-or-for-i-in-seq-1-10-do-echo-hello-i-done>Simple bash to run repeatly: <code>for i in {1..10}; do echo "hello"; done</code> or <code>for i in </code>seq 1 10<code>; do echo "hello $i"; done</code></h2><h2 id=how-to-keep-original-query-in-curl>How to keep original query in <code>curl</code>?</h2><p>Use single quotes to quote url like this: <code>curl 'localhost:9200/_cat/indices?format=json&pretty'</code></p><h2 id=curl-example--curl-lo-minikube-httpsstoragegoogleapiscomminikubereleasesv130minikubedarwinamd64><code>curl</code> example: <code>curl -Lo minikube https://storage.googleapis.com/minikube/releases/v1.3.0/minikube-darwin-amd64</code></h2><h2 id=use-color-option-with-grep-like-this-sysctl-a--grep-e-color-machdepcpufeaturesvmx>Use <code>--color</code> option with <code>grep</code> like this: <code>sysctl -a | grep -E --color 'machdep.cpu.features|VMX'</code></h2><h2 id=tools-for-trouble-shooting-linux-io-performance>Tools for trouble shooting linux io performance</h2><p>iotop, atop, <a href=https://bartsjerps.com/2011/03/04/io-bottleneck-linux/>iostat</a></p><h2 id=tricks-to-append-to-bashhistory-for-each-executed-command>Tricks to append to <code>~/.bash_history</code> for each executed command:</h2><blockquote><p>Just add this line to <code>~/.bashrc</code>: <code>export PROMPT_COMMAND='history -a'</code>, here <code>-a</code> option means append to history file. The reason is explained <a href=http://northernmost.org/blog/flush-bash_history-after-each-command/>here</a>. Exmply put: &ldquo;If <code>PROMPT_COMMAND</code> is set, the value is executed as a command prior to issuing each primary prompt.&rdquo;</p></blockquote><h2 id=how-to-search-some-types-of-files-by-the-silver-searcherhttpsgithubcomggreerthesilversearcherissues128>How to search some types of files by <a href=https://github.com/ggreer/the_silver_searcher/issues/128>the silver searcher</a></h2><blockquote><p>Just type <code>ag "something" --&lt;filetype></code> such as <code>ag "and" --yaml</code></p></blockquote><h2 id=how-to-grow-an-ext234-file-system-with-resize2fshttpsaccessredhatcomarticles1196353><a href=https://access.redhat.com/articles/1196353>How to Grow an ext2/3/4 File System with resize2fs</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh><span class=c1># unmount the partition first</span>
umount /dev/vdb1

<span class=c1># Run fsck on the unmounted file system</span>
e2fsck /dev/vdb1

<span class=c1># resize the file system</span>
resize2fs /dev/vdb1

<span class=c1># mount the file system and partition again</span>
mount /dev/vdb1 &lt;mount point&gt;
</code></pre></td></tr></table></div></div><p>For tencent cloud cbs, it's strange that you just need to call <code>resize2fs</code> command resize the whole disk device althouth there is no partition created on that disk.</p><h2 id=understand-filemax-filenrhttpsaccessredhatcomdocumentationenusredhatenterpriselinux5htmltuningandoptimizingredhatenterpriselinuxfororacle9iand10gdatabaseschaporacle9iand10gtuningguidesettingfilehandles><a href=https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/tuning_and_optimizing_red_hat_enterprise_linux_for_oracle_9i_and_10g_databases/chap-oracle_9i_and_10g_tuning_guide-setting_file_handles>Understand file-max /file-nr</a></h2><blockquote><p>To determine the current usage of file handles, run: <code>cat /proc/sys/fs/file-nr</code>
The file-nr file displays three parameters:
the total allocated file handles.
the number of currently unused file handles (with the 2.6 kernel).
the maximum file handles that can be allocated (also found in /proc/sys/fs/file-max).</p></blockquote><h2 id=linux-performance-commandshttpsgeekflarecomlinuxperformancecommands><a href=https://geekflare.com/linux-performance-commands/>Linux performance commands</a></h2><pre><code>- `lsof`: can be used to check opened files (including network port) by process. Install: `yum install -y lsof`. Example: `lsof -p 4200`
- `pidstat`: monitor tasks managed by Linux kernel, and troubleshooting I/O related issue. Install: `yum install -y sysstat`. Example: `pidstat -p 4362 -d 5`
- `iostat`:  monitor CPU, Device &amp; Network file system utilization report. Inlcuded in *sysstat* package. Example: `iostat -d 2`, `iostat -c 2`
- `sar`:  collect a number of a report including CPU, Memory and device load. Included in *sysstat* package. Example: `sar 2` to show cpu usage every 2 seconds
- `ldd`: stands for list dynamic dependencies to show shared libraries needed by the library. The ldd command can be handy to diagnose the application startup problem. Example: `ldd /usr/local/bin/kubectl`
- `ipcs`: (InterProcess Communication System) provides a report on the semaphore, shared memory &amp; message queue. Example: `ipcs -u` to show current usage status.
</code></pre><h2 id=perf-originally-performance-counter-for-linux-is-a-performance-analyzing-tool-in-linux><code>perf</code> originally Performance Counter for Linux is a performance analyzing tool in Linux.</h2><p>Install: <code>yum install -y perf</code></p><p>This might be the ultimate performance analyzing tool for linux. Various usage examples can be find <a href=http://www.brendangregg.com/perf.html>here</a>. Some interesting examples:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh><span class=c1># CPU counter statistics for the entire system, for 5 seconds:</span>
perf stat -p <span class=m>28163</span>  -a sleep <span class=m>5</span>

<span class=c1># Count system calls by type for the entire system, for 5 seconds:</span>
perf stat -e <span class=s1>&#39;syscalls:sys_enter_*&#39;</span> -a sleep <span class=m>5</span>
</code></pre></td></tr></table></div></div><h2 id=for-curl-it-is-possible-to-specify-a-selfsigned-ca-to-allow-https-connection-like-this--curl-cacert-rootcacrt-httpslocalhost3000>For <code>curl</code>, it is possible to specify a self-signed ca to allow https connection like this: <code>curl --cacert root-ca.crt https://localhost:3000</code></h2><p><code>openssl s_client -connect &lt;host>:&lt;port></code> can be used to test connectivity to SSL services.</p><p><code>openssl rand -base64 &lt;size></code> to generate certain size random base64 encoded string</p><p>Source: <a href=https://docs.docker.com/engine/swarm/secrets/>docker secrets</a></p><h2 id=use-lsblk-to-show-disk-and-partition-layout-for-local-host>Use <code>lsblk</code> to show disk and partition layout for local host</h2><h2 id=understand-noatime-flag-used-for-mount-option>Understand <code>noatime</code> flag used for <code>mount</code> option</h2><blockquote><p>Linux has a special mount option for file systems called noatime. If this option is set for a file system in /etc/fstab, then reading accesses will no longer cause the atime information (last access time - don't mix this up with the last modified time - if a file is changed, the modification date will still be set) that is associated with a file to be updated (in reverse this means that if noatime is not set, each read access will also result in a write operation). Therefore, using noatime can lead to significant performance gains.</p></blockquote><p>Other options is explained in <a href=https://www.systutorials.com/docs/linux/man/5-xfs/>xfs manual</a></p><h2 id=use-sed-command-to-show-uncomment-options-sed-n-p-osdsyml>Use <code>sed</code> command to show un-comment options: <code>sed -n /^[^#]/p osds.yml</code></h2><h2 id=how-to-specify-odd-crontab-sequence>How to specify odd crontab sequence?</h2><p>Use format <em>from-to/step</em> like this: 1-23/2 for hours 1,3,5&mldr;23, and 0-22/2 for even hours</p><h2 id=how-to-use-dd-command-to-write-data-to-some-folder-for-testing>How to use <em>dd</em> command to write data to some folder for testing?</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh><span class=c1># write a 10M all zero file</span>
dd <span class=k>if</span><span class=o>=</span>/dev/zero <span class=nv>of</span><span class=o>=</span>test.img <span class=nv>bs</span><span class=o>=</span><span class=m>1024</span> <span class=nv>count</span><span class=o>=</span>$<span class=o>[</span>1024*10<span class=o>]</span>

</code></pre></td></tr></table></div></div><h2 id=how-to-test-against-udp-port>How to test against udp port?</h2><p>Use <em>nc</em> command like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh><span class=nb>echo</span> -n <span class=s2>&#34;blah:36|c&#34;</span> <span class=p>|</span> nc -w <span class=m>1</span> -u -4 localhost <span class=m>8125</span>
</code></pre></td></tr></table></div></div><h2 id=how-to-troubleshooting-weird-error-such-as-tmux-newsession-returns-cant-create-socket>How to troubleshooting weird error such as: <em>Tmux new-session returns: “can't create socket”</em>?</h2><p>Refer to <a href=https://serverfault.com/questions/696794/tmux-new-session-returns-cant-create-socket>tmux-new-session-returns-cant-create-socket</a>,
you can use <code>strace</code> command to trace into which file is being open like this: <code>strace -f -e trace=file tmux</code></p><h2 id=how-to-use-sed-to-print-out-something-not-match>How to use <em>sed</em> to print out something not match?</h2><p>Use <em>!p</em> command like this: <code>sed -n "/CERT/!p" /tmp/a.pem</code></p><h2 id=how-to-limit-bandwidth-on-linux>How to limit bandwidth on linux?</h2><p>A working solution is detail <a href=https://www.cyberciti.biz/faq/linux-traffic-shaping-using-tc-to-control-http-traffic/>here</a>
Below is sample commands to limit egress bandwidth on 10086 port</p><pre><code># add a root handle
tc qdisc add dev eth0 root handle 1: htb
# add a class 1:1 to limit rate to 256kbps,and ceil as 512kbps
tc class add dev eth0 parent 1: classid 1:1 htb rate 256kbps ceil 512kbps
# use iptables to mark traffic
iptables -A OUTPUT -t mangle -p tcp --sport 10086 -j MARK --set-mark 6
# add tc filter to 
tc filter add dev eth0 parent 1: prio 0 protocol ip handle 6 fw flowid 1:1
# list existing rules
tc -s -d class show dev eth0
# delete rules
tc qdisc del dev eth1 root

</code></pre><h2 id=check-block-device-by-command-lsblk-on-linux>Check block device by command: <code>lsblk</code> on linux</h2><h2 id=how-to-check-whether-some-linux-module-is-installed>How to check whether some linux module is installed?</h2><p>Use modinfo command like this: <code>modinfo br_netfilter</code></p><h2 id=what-does-phony-means-in-makefilehttpswwwgnuorgsoftwaremakemanualhtmlnodephonytargetshtml><a href=https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html>What does &ldquo;.PHONY&rdquo; means in Makefile</a></h2><p>A phony target is one that is not really the name of a file; rather it is just a name for a recipe to be executed when you make an explicit request.</p><h2 id=how-to-get-some-statistic-data-about-curl>How to get some statistic data about curl?</h2><p>curl provides <em>-w</em> option to write some outputs. A simple example is adding the following option to output total cost time.: <code>-w "time_total: %{time_total}\n"</code></p><h2 id=use-declare-to-show-defined-functions-exported-varibles-and-define-new-one>Use <code>declare</code> to show defined functions, exported varibles and define new one</h2><h2 id=how-to-rename-recorded-files-on-macbook>How to rename recorded files on macbook?</h2><pre><code>ls | awk '{ gsub(/ /, &quot;_&quot;); x=$0;gsub(/_/, &quot;\\ &quot;); system(&quot;mv &quot;$0&quot;  &quot;x)}'
ls | awk '{ x=$0;gsub(/Evernote/, &quot;Xue&quot;); system(&quot;mv &quot;x&quot;  &quot;$0)}'
</code></pre><h2 id=how-to-allow-certain-user-to-call-sudo-without-tty>How to allow certain user to call sudo without tty?</h2><p>Add a line like the following one to /etc/sudoers (or invoke <code>visudo</code> as root user):</p><pre><code>Defaults:myuser !requiretty
</code></pre><h2 id=socket-statistics-tool-ss-improved-version-of-netstat-an-example-usage-ss-antl-to-show-listening--tcp-port>socket statistics tool <em>ss</em>, improved version of <em>netstat</em>, an example usage: <code>ss -antl</code> to show listening tcp port</h2><h2 id=how-to-display-the-date-and-time-using-linux-command-linehttpswwwlifewirecomdisplaydatetimeusinglinuxcommandline4032698><a href=https://www.lifewire.com/display-date-time-using-linux-command-line-4032698>How To Display The Date And Time Using Linux Command Line</a></h2><pre><code>+ Example to get current date and format it: `date '+%Y%m/%d%H%M%S'`
</code></pre><h2 id=how-to-change-character-encoding-of-a-text-file-on-linuxhttpaskxmodulocomchangecharacterencodingtextfilelinuxhtml><a href=http://ask.xmodulo.com/change-character-encoding-text-file-linux.html>How to change character encoding of a text file on Linux?</a></h2><pre><code>+ Check file encoding by: `file --mime-encoding &lt;filename&gt;`
+ Check system supported encoding by: `iconv -l`
+ Change file encoding by: `iconv -f &lt;oldEncoding&gt; -t &lt;newEncoding&gt;  &lt;filename&gt;`
+ An example to apply all for txt file: 
</code></pre><pre><code>    for file in *.txt; do
    iconv -f ascii -t utf-8 &quot;$file&quot; -o &quot;${file%.txt}.utf8.txt&quot;
done
</code></pre><h2 id=linux--unix-create-large-1gb-binary-image-file-with-dd-commandhttpwwwcybercitibizfaqhowtocreatelagefileswithddcommand><a href=http://www.cyberciti.biz/faq/howto-create-lage-files-with-dd-command/>Linux / UNIX: Create Large 1GB Binary Image File With dd Command</a></h2><h2 id=how-to-fix-low-space-in-runhttpserverfaultcomquestions472683lowonspaceinrun><a href=http://serverfault.com/questions/472683/low-on-space-in-run>How to fix low space in /run?</a></h2><pre><code>+ `mount -t tmpfs tmpfs /run -o remount,size=85M`
</code></pre><h2 id=do-changes-in-etcsecuritylimitsconf-require-a-reboot>Do changes in <em>/etc/security/limits.conf</em> require a reboot?</h2><p><em>No but you should close all active sessions windows. They still remember the old values. In other words, log out and back in. Every remote new session or a local secure shell take effect of the limits changes.</em></p><h2 id=socat-linux--unix-tcp-port-forwarderhttpwwwcybercitibizfaqlinuxunixtcpportforwarding><a href=http://www.cyberciti.biz/faq/linux-unix-tcp-port-forwarding/>socat: Linux / UNIX TCP Port Forwarder</a></h2><h2 id=how-to-create-password-hash>How to create password hash?</h2><p>Use tool called <em>whois</em> on ubuntu and command like this:<code>mkpasswd --method=SHA-512</code>.</p><h2 id=how-to-zero-an-existing-file>How to zero an existing file?</h2><pre><code>-  `cat /dev/null &gt; logfile`
-  `truncate logfile --size 0`
-  `dd if=/dev/null of=logfile`, which will write 0 to file and won't truncate it
</code></pre><h2 id=how-to-enable-permission-to-allow-other-to-list-a-directory>How to enable permission to allow <em>other</em> to list a directory?</h2><p>Just need to grant <em>x</em> permission on directory for other, like this:
<code>chmod o+x foldername</code></p><h2 id=how-to-add-a-user-to-a-group>How to add a user to a group?</h2><p><code>usermod -G group-name user-name</code></p><h2 id=how-to-turn-off-password-expirationhttpwwwcybercitibiztipssettingoffpasswordagingexpirationhtml><a href=http://www.cyberciti.biz/tips/setting-off-password-aging-expiration.html>How to turn off password expiration?</a></h2><p>Like this:<code>chage -I -1 -m 0 -M 99999 -E -1 username</code>
Alternatively, you can generate password with python <em>passlib</em></p><pre><code>pip install passlib
python -c &quot;from passlib.hash import sha512_crypt; import getpass; print sha512_crypt.encrypt(getpass.getpass())&quot;
</code></pre><h2 id=how-to-grep-and-replace-certain-words>How to grep and replace certain words?</h2><p>An example like this: <code>grep 172.16.0.164 -r . | awk -F ':' '{ system("sed -i \"s/172.16.0.164/10.0.46.243/g\" "$1)}'</code>
Another example: <code>grep FROM -r . | awk -F ':' '{ system("sed -i \"s/FROM.*$/FROM docker\\.repo\\:5000\\/ppc64le\\/centos\\:7\\.2/g\" "$1)}'</code>,
<code>grep FROM -r . | awk -F ':' '{ system("sed -i \"s/LABEL.*$/LABLEL version=\\\"{{ image_version }}\\\"/g\" "$1)}'</code>
On Mac, example: <code>grep -I loc8r -r . | awk -F ':' '{ system("sed -i \"\" \"s/loc8r/prov/g\" "$1)}'</code></p><h2 id=what-does--doubledash-mean-also-known-as-bare-double-dash>What does “&ndash;” (double-dash) mean? (also known as “bare double dash”)?</h2><pre><code>More precisely, a double dash (--) is used in bash built-in commands and many other commands to signify the end of command options, after which only positional parameters are accepted.

    Example use: lets say you want to grep a file for the string -v - normally -v will be considered the option to reverse the matching meaning (only show lines that do not match), but with -- you can grep for string -v like this:

grep -- -v file
</code></pre><h2 id=how-do-i-find-the-direct-shared-object-dependencies-of-a-linux-elf-binaryhttpstackoverflowcomquestions6242761howdoifindthedirectsharedobjectdependenciesofalinuxelfbinary><a href=http://stackoverflow.com/questions/6242761/how-do-i-find-the-direct-shared-object-dependencies-of-a-linux-elf-binary>How do I find the direct shared object dependencies of a Linux (ELF) binary?</a></h2><pre><code>+ `readelf -d &lt;file&gt;`
+ `ldd &lt;file&gt;`, [more](http://linux.about.com/od/commands/fl/How-To-Find-The-Shared-Libraries-For-A-Program-Using-ldd-Command.htm)
</code></pre><h2 id=how-to-fix-x11-connection-rejected-because-of-wrong-authentication-error-and-solutionhttpwwwcybercitibizfaqx11connectionrejectedbecauseofwrongauthentication><a href=http://www.cyberciti.biz/faq/x11-connection-rejected-because-of-wrong-authentication/>How to fix X11 Connection Rejected Because of Wrong Authentication Error and Solution</a></h2><p>And also,</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh><span class=nb>cd</span> /home/machine
mv .Xauthority .Xauthority.old
touch .Xauthority
chown machine:machine .Xauthority 
</code></pre></td></tr></table></div></div><pre><code>+ Install X11 on ubuntu: `sudo apt-get install xorg openbox`
+ Fix _.Xauthority_ issue 
+ Connect via `ssh -X &lt;remote machine&gt;`
+ 
</code></pre><h2 id=how-to-add-user-to-sudoers>How to add user to sudoers?</h2><p>On Ubuntu: <code>sudo usermod -aG root &lt;username></code>
On CentOs: <code>sudo usermod -aG wheel &lt;username></code>
And if you want <em>NOPASSWD</em>, <code>echo "%wheel ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers</code></p><h2 id=how-to-use-rsync-to-sync-files-to-remote-server>How to use <em>rsync</em> to sync files to remote server?</h2><p>Like the following:
<code>rsync --progress --partial -avz ~/dev/ibm/CloudDb-Ops dev_ci:~/dev/</code></p><h2 id=how-to-split-big-filehttpaskubuntucomquestions54579howtosplitlargerfilesintosmallerparts><a href=http://askubuntu.com/questions/54579/how-to-split-larger-files-into-smaller-parts>How to split big file?</a></h2><p>Use buil-in command <em>split</em> like this:</p><pre><code>split -b 100m largefile path/to/parts/nameprefix
# later combine to a single file by:
cat path/to/parts/nameprefix* &gt; largefile
</code></pre><h2 id=a-unix-utility-you-should-know-about-lsofhttpwwwcatonmatnetblogunixutilitieslsof><a href=http://www.catonmat.net/blog/unix-utilities-lsof/>A Unix Utility You Should Know About: lsof</a></h2><pre><code>+ Find who's using a file: `lsof /path/to/file`
+ Find all open files in a directory recursively: `lsof +D /usr/lib`
+ List all open files by a user: `lsof -u informix`
+ Find all open files by program's name: `lsof -c oninit`
+ List all open files by a user AND process: `lsof -a -u pkrumins -c bash`
+ List all open files by the process with PID: `lsof -p 12345`
+ List all TCP network connections: `lsof -i tcp`
+ Find who's using a port: `lsof -i :22`, `lsof -i tcp:22`
</code></pre><h2 id=10-screen-command-examples-to-manage-linux-terminalshttpwwwtecmintcomscreencommandexamplestomanagelinuxterminals><a href=http://www.tecmint.com/screen-command-examples-to-manage-linux-terminals/>10 Screen Command Examples to Manage Linux Terminals</a></h2><pre><code>+ `screen` to start a new screen
+ `Ctrl+A` is the escape key stroke. `Ctrl+A` then `?` for help
+ `screen -r` to attach an existing screen
+ `Ctrl+A` then `D` to detach from current screen
+ _~/.screenrc_ is the screen configuration file, add `escape ^Ww` to change escape key stroke to _Ctrl+W_
</code></pre><h2 id=how-to-add-a-new-cron-job-from-command-line>How to add a new cron job from command line?</h2><p><code>crontab -l | { cat; echo "*/5 * * * * hds.monitor -t 320"; } | crontab -</code></p><h2 id=some-of-linux-commands-support-pattern-batch-operatoins>Some of linux commands support pattern batch operatoins</h2><p>The following are some examples:</p><pre><code>mkdir -p provision/{setup,deploy}/{tasks,vars,handlers}
touch provision/{setup,deploy}/{tasks,vars,handlers}/main.yml
cat /etc/*-release
</code></pre><h2 id=how-to-check-linux-distribution-and-version>How to check linux distribution and version?</h2><p><code>cat /etc/*-release</code> or <code>lsb_release -a</code></p><p>To find out linux kernel version: <code>uname -a</code></p><h2 id=how-to-check-whether-some-process-exists-by-grep-and-exclude-grep-itself>How to check whether some process exists by grep and exclude grep itself?</h2><p>The trick is to use simple regular expression like the following:
<code>ps aux | grep [v]nc</code> to check whether vnc process exists</p><h2 id=how-to-find-zoombie-process-and-kill-them-by-awk>How to find zoombie process and kill them by <em>awk</em>?</h2><pre><code>ps aux | awk '&quot;[Zz]&quot; ~ $8 { printf(&quot;%s, PID = %d\n&quot;, $8, $2); }'
</code></pre><h2 id=how-to-delete-linux-mail>How to delete linux mail?</h2><p><code>echo 'd *' | mail -N</code></p><h2 id=how-to-kill-zoombie-process>How to kill zoombie process?</h2><pre><code># to kill zoombie, you can try `kill -9 &lt;pid&gt;` or 
# ps axu | awk '&quot;[Zz] ~ $8 { system(sprintf(&quot;kill -HUP %d&quot;, $2)); }'
</code></pre><h2 id=how-to-diff-dictories>How to diff dictories?</h2><p>Just use <code>diff</code> or better <code>colordiff</code> command (or add an alias), then compare with command like: <code>diff --brief -r dir1 dir2</code></p><h2 id=how-to-use-find-with-exec-to-remove-some-type-of-files>How to use find with exec to remove some type of files?</h2><p>Example:
<code>find . -iname "*.pyc" -exec \rm {} \;</code>
Note:
- make use to quote <em>*.pyc</em>
- need to append <em>;</em> to mark the end of command
Reference: <a href=http://www.binarytides.com/linux-find-command-examples/>find command examples</a></p><h2 id=how-to-upgrade-python>How to upgrade python?</h2><pre><code># Add yum repo for python27
sudo sh -c 'wget -qO- http://people.redhat.com/bkabrda/scl_python27.repo &gt;&gt; /etc/yum.repos.d/scl.repo'
# install python27
sudo yum install -y python27
#
</code></pre><h2 id=simulate-initial-login-as-root>Simulate initial login as root</h2><p><code>sudo -i</code></p><h2 id=how-to-disable-root-ssh-login>How to disable root ssh login?</h2><pre><code>vi /etc/ssh/sshd_config
# uncomment line: PermitRootLogin no
# and then restart sshd
/etc/init.d/sshd restart 
# or on redhat7: systemctl restart sshd
# or service sshd restart
</code></pre><p>Detail could be found <a href=http://www.howtogeek.com/howto/linux/security-tip-disable-root-ssh-login-on-linux/>here</a></p><h2 id=how-to-install-mongo-shell-on-ppc64-linux>How to install mongo shell on PPC64 linux?</h2><pre><code>yum install -y boostdevel
wget ftp://ftp.software.ibm.com/linux/rpms/redhat/7.0/v8-3.14.5.10-2.el7.ppc64.rpm
wget ftp://ftp.software.ibm.com/linux/rpms/redhat/7.0/libmongodb-2.4.9-1.el7.ppc64.rpm
wget ftp://ftp.software.ibm.com/linux/rpms/redhat/7.0/mongodb-2.4.9-1.el7.ppc64.rpm
rpm -ivh v8-3.14.5.10-2.el6.ppc64.rpm libmongodb-2.4.9-1.el6.ppc64.rpm mongodb-2.4.9-1.el6.ppc64.rpm

# But the above rpm does not work on lab VMs
# even adding more rpm options: --nodeps --ignorearch

</code></pre><h2 id=how-to-add-a-cron-job-to-sync-code>How to add a cron job to sync code?</h2><pre><code>rsync -avz -e ssh root@hdsa:/root/src/cds ~/src/

#############
# Add a cron job like the following to sync code every 5 minutes
# */5 * * * *  rsync -avz --delete -e ssh root@hdsa:/root/src/cds ~/src/
############

</code></pre><h2 id=how-to-trouble-shooting-hang-in-linux>How to trouble shooting hang in linux?</h2><p>From system level, you can try run <code>strace &lt;command></code>; and you should first check system log for more information (sort log file by time <code>ll -t</code>)</p><h2 id=how-to-trouble-shooting-ssh-issue>How to trouble shooting ssh issue?</h2><p>Try to use verbose option <code>ssh -vvv ...</code></p><h2 id=how-to-check-linux-system-loginshutdownreset-event>How to check linux system login/shutdown/reset event?</h2><p><code>last -x</code></p><h2 id=how-to-grep-linux-process-or-grep-and-kill-them>How to grep linux process or grep and kill them?</h2><p>use <code>pgrep</code> or <code>pkill</code></p><h2 id=how-to-check-linux-process>How to check linux process?</h2><p>use <code>checkproc</code>
The default pid file is place at <em>/var/run/.pid</em>, and its status could be checked at <em>/proc//stat</em></p><h2 id=how-to-find-out-which-process-is-listening-upon-a-porthttpwwwcybercitibizfaqwhatprocesshasopenlinuxport>How to find out <a href=http://www.cyberciti.biz/faq/what-process-has-open-linux-port/>Which Process Is Listening Upon a Port</a></h2><pre><code>- netstat - a command-line tool that displays network connections, routing tables, and a number of network interface statistics.
    Example __netstat -tupln__, __netstat -tunelp__, __netstat -pan__
- fuser - a command line tool to identify processes using files or sockets. 
- lsof - a command line tool to list open files under Linux / UNIX to report a list of all open files and the processes that opened them.
- /proc/$pid/ file system - Under Linux /proc includes a directory for each running process (including kernel processes) at /proc/PID, containing information about that process, notably including the processes name that opened port.
</code></pre><h2 id=how-to-get-pid-for-a-service>How to get pid for a service?</h2><p><code>pidof &lt;name></code> such as <code>pidof snmpd</code></p><h2 id=how-to-consolidate-source-code-and-add-a-header-for-each-file>How to consolidate source code and add a header for each file?</h2><p><code>ls -S -r *.py | xargs -I {} sh -c 'echo ============================{}============================== ; cat {}'</code></p><h2 id=fc-utility>fc utility</h2><p><code>fc</code> utility is helpful to view, edit and execute previous commands</p><h2 id=cat-vte><code>cat -vte</code></h2><p>This is useful to check what terminal actually received when you press a key such as F10.
Tips from <a href="https://discussions.apple.com/thread/2587542?tstart=0">https://discussions.apple.com/thread/2587542?tstart=0</a></p><h2 id=how-to-troube-shooting-http-connection-issue>How to troube shooting http connection issue?</h2><p>curl could be used as the first step trouble shooting. <em>-i</em> and <em>-v</em> options are useful to check header and trace.
For ssl related issue, <code>OpenSSL s_client -connect crl.ptopenlab.com:8800</code> could be used to check SSL hand-shaking process.</p><h2 id=how-to-remount-file-system-to-allow-write>How to re-mount file system to allow write?</h2><p>like this:
<code>sudo mount -o remount,rw '/media/SGTL MSCN'</code></p><h2 id=how-to-add-a-system-service>How to add a system service?</h2><p>Refer to the following link for a good guide on how to add collectd as service:
<a href=https://anomaly.io/install-collectd-on-centos-fedora/>https://anomaly.io/install-collectd-on-centos-fedora/</a></p><h2 id=how-to-generate-a-sequnence>How to generate a sequnence?</h2><pre><code>for i in `seq 1 100`; do echo $i; done
</code></pre><h2 id=how-to-check-existing-group-and-user>How to check existing group and user?</h2><p>Reference: <a href=http://www.cyberciti.biz/faq/linux-check-existing-groups-users/>http://www.cyberciti.biz/faq/linux-check-existing-groups-users/</a>
To check existing group: <code>getent group</code>
To check existing user: <code>getent passwd</code></p><h2 id=how-to-query-detail-about-a-rpm-pacakge>How to query detail about a rpm pacakge?</h2><p>Reference: <a href=http://www.rpm.org/max-rpm/ch-rpm-query.html>http://www.rpm.org/max-rpm/ch-rpm-query.html</a>
Follow format like <code>rpm -q &lt;more option> &lt;package name></code>, example:
<code>rpm -q -l net-snmp</code></p><h2 id=how-to-get-file-stat-in-linux>How to get file stat in linux?</h2><p>like the following:
<code>stat --format '%a' /etc/profile.d/informix.sh</code></p><h2 id=how-to-update-ubuntu-repo-list>How to update ubuntu repo list?</h2><p>Edit /etc/apt/sources.list, add the following entries to file, and comment out other sources (for ubuntu 14.04)</p><pre><code>deb http://mirrors.aliyun.com/ubuntu/ trusty main 
deb-src http://mirrors.aliyun.com/ubuntu/ trusty main
</code></pre><p>Per <a href=https://launchpad.net/ubuntu/+mirror/mirrors.aliyun.com-archive>https://launchpad.net/ubuntu/+mirror/mirrors.aliyun.com-archive</a></p><h2 id=shell-control-flow-example>Shell control flow example</h2><p>Reference: <a href=http://linuxcommand.org/wss0090.php>http://linuxcommand.org/wss0090.php</a></p><pre><code> First form
if condition ; then
    commands
fi

Second form
if condition ; then
    commands
else
    commands
fi

Third form
if condition ; then
    commands
elif condition ; then
    commands
fi
</code></pre><h3 id=tcpdump-basic-usage>tcpdump basic usage</h3><p>Refer to <a href=http://www.rationallyparanoid.com/articles/tcpdump.html>this artical for detail</a></p><h2 id=monitor-icmp-protocal--tcpdump-icmp>monitor icmp protocal: <code>tcpdump icmp</code></h2><h2 id=monitor-packages-to-some-destination-port-tcpdump-n-dst-port-23>monitor packages to some destination port: <code>tcpdump -n dst port 23</code></h2><h2 id=monitor-packages-going-out-to-other-host-tcpdump-n-dst-host-19216811-and-dst-port-23>monitor packages going out to other host: <code>tcpdump -n "dst host 192.168.1.1 and dst port 23"</code></h2><h2 id=capture-packages-from-some-source-host-tcpdump-n-src-host-19216811>capture packages from some source host: <code>tcpdump -n src host 192.168.1.1</code></h2><h2 id=capture-packate-from-some-interface-tcpdump-i-eth0-or-from-all-interface-tcpdump-i-any>capture packate from some interface: <code>tcpdump -i eth0</code> or from all interface <code>tcpdump -i any</code></h2><h2 id=capture-udp-package-from-all-interfaces-sudo-tcpdump-i-any-udp-port-11940-xvv>capture udp package from all interfaces: <code>sudo tcpdump -i any udp port 11940 -Xvv</code></h2><h3 id=tools>tools</h3><h2 id=terminal-based-browers>Terminal based browers</h2><pre><code>- elinks: support tabs but not images
- w3m: http://w3m.sourceforge.net/
- Emacs-w3m
</code></pre><h2 id=references>References:</h2><h2 id=a-tcpdump-primer-with-exampleshttpsdanielmiesslercomstudytcpdump><a href=https://danielmiessler.com/study/tcpdump/>A tcpdump Primer with Examples</a></h2><h2 id=linux-file-systems-ext2-vs-ext3-vs-ext4-vs-xfshttpshabbathsterblogspotjp201407linuxfilesystemsext2vsext3vsext4html><a href=http://shabbathster.blogspot.jp/2014/07/linux-file-systems-ext2-vs-ext3-vs-ext4.html>Linux File Systems: Ext2 vs Ext3 vs Ext4 vs Xfs</a></h2><h2 id=rsync-remote-sync-10-practical-examples-of-rsync-command-in-linuxhttpwwwtecmintcomrsynclocalremotefilesynchronizationcommands><a href=http://www.tecmint.com/rsync-local-remote-file-synchronization-commands/>Rsync (Remote Sync): 10 Practical Examples of Rsync Command in Linux</a></h2><h2 id=view-the-status-of-selinuxhttpswwwcentosorgdocs5html51deploymentguidesecselinuxstatusviewinghtml><a href=https://www.centos.org/docs/5/html/5.1/Deployment_Guide/sec-selinux-status-viewing.html>view the status of SELinux</a></h2><h2 id=disable-selinuxhttpsaccessredhatcomdocumentationenusredhatenterpriselinux6htmlsecurityenhancedlinuxsectsecurityenhancedlinuxenablinganddisablingselinuxdisablingselinuxhtml><a href=https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security-Enhanced_Linux/sect-Security-Enhanced_Linux-Enabling_and_Disabling_SELinux-Disabling_SELinux.html>Disable SELinux</a></h2><pre><code>- Edit _/etc/selinux/config_ by adding _SELINUX=disabled_ and _SELINUXTYPE=targeted_, and reboot.
- Check status by `getenforce`, or `sestatus`
</code></pre></div><footer class=post-footer><nav class=post-nav><a class=prev href=/post/tips/life/><i class="iconfont icon-left"></i><span class="prev-text nav-default">life</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=/post/tips/mac/><span class="next-text nav-default">mac</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:leowa@outlook.com class="iconfont icon-email" title=email></a><a href=https://github.com/leowa class="iconfont icon-github" title=github></a><a href=http://localhost:1313/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=copyright-year>&copy;
2019 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Andy Zhang</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=/dist/even.26188efa.min.js></script></body></html>